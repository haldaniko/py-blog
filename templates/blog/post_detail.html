{% extends "base.html" %}
{% load crispy_forms_filters %}
{% block content %}
  <div class="content">
    <h1>{{ post.title }}</h1>
    <p><i>{{ post.owner.username }} {{ post.created_time }}</i></p>
    <p>{{ post.content }}</p>
  </div>
  <hr>
  <div class="content">
    <h4>Comments</h4>
    {% if post.commentary_set %}
      {% for comment in post.commentary_set.all %}
        <div>
          <p><b>{{ comment.user.username }} {{ comment.created_time }}</b></p>
          <p>> {{ comment.content }}</p>
          {% if not forloop.last %}
            <hr>
          {% endif %}
        </div>
      {% endfor %}
    {% else %}
      <p>No comments yet</p>
    {% endif %}

  </div>
  <hr>
  {% if user.is_authenticated %}
    <div class="content">
    <h4>Add a comment</h4>
    <form action="{% url 'blog:commentary-create' post.id %}" method="post">
      {% csrf_token %}
      {{ commentary_form|crispy }}
    </form>
  {% else %}
    <p>You must be logged in to comment.</p>
  {% endif %}
    </div>
{% endblock %}
